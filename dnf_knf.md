#Преобразование произвольной логической формулы в конъюнктивную (КНФ) и дизъюнктивную (ДНФ) нормальную форму. Пошаговая инструкция


## Общая концепция

И **КНФ**, и **ДНФ** являются нормированными представлениями логических формул. Они строятся из:
*   **Литералов**: переменных (например, `A`) или их отрицаний (¬`A`).
*   **Элементарных дизъюнкций** (дизъюнктов): выражений вида `A ∨ B ∨ ¬C`. Конъюнкция таких дизъюнктов — это **КНФ**.
    *   Пример КНФ: `(A ∨ ¬B) ∧ (B ∨ C)`
*   **Элементарных конъюнкций** (конъюнктов): выражений вида `A ∧ B ∧ ¬C`. Дизъюнкция таких конъюнкций — это **ДНФ**.
    *   Пример ДНФ: `(A ∧ B) ∨ (B ∧ ¬C)`

Цель преобразования — избавиться от всех логических операций, кроме `∧`, `∨` и `¬`, и привести формулу к нужной структуре.

---

## Универсальный алгоритм преобразования (шаги 1-4 общие)

Независимо от того, какую форму вы хотите получить (КНФ или ДНФ), первые четыре шага одинаковы.

**Шаг 1: Устранить импликацию и эквивалентность**
Замените все вхождения операций `→` и `↔` на их эквивалентные выражения, использующие только `∧`, `∨`, `¬`.
*   `A → B` эквивалентно `¬A ∨ B`
*   `A ↔ B` эквивалентно `(A ∧ B) ∨ (¬A ∧ ¬B)` или `(¬A ∨ B) ∧ (A ∨ ¬B)`

**Шаг 2: Продвинуть отрицания (Привести к нормальной форме отрицания)**
Используйте **законы де Моргана**, чтобы "продвинуть" отрицания (`¬`) к самим переменным. Это значит, что знак отрицания должен стоять только перед переменной, а не перед целой скобкой.
*   ¬(A ∧ B) эквивалентно ¬A ∨ ¬B
*   ¬(A ∨ B) эквивалентно ¬A ∧ ¬B
*   Также используйте закон двойного отрицания: ¬¬A эквивалентно A

**Пример:** Преобразуем ¬(A ∨ ¬B)
1.  Применяем де Моргана: ¬A ∧ ¬(¬B)
2.  Применяем двойное отрицание: ¬A ∧ B
Теперь все отрицания стоят только перед переменными.

**Шаг 3: Применить законы дистрибутивности (здесь пути к ДНФ и КНФ расходятся)**
Это ключевой шаг, который определяет, получится у вас КНФ или ДНФ.

---

## Алгоритм для получения Дизъюнктивной Нормальной Формы (ДНФ)

**Цель:** Представить формулу в виде дизъюнкции конъюнктов.

На **Шаге 3** для ДНФ нужно применять **дистрибутивность конъюнкции относительно дизъюнкции**:
`A ∧ (B ∨ C)` эквивалентно `(A ∧ B) ∨ (A ∧ C)`

**Общая тактика:** Раскрывать скобки, чтобы конъюнкция оказалась "внутри", а дизъюнкция — "снаружи".

**Шаг 4 (для ДНФ): Упрощение (опционально, но рекомендуется)**
*   Удалить повторяющиеся литералы в конъюнктах: `(A ∧ A ∧ B)` -> `(A ∧ B)`
*   Удалить конъюнкты, которые заведомо ложны (содержат `A` и `¬A`).
*   Использовать законы поглощения.

---

## Алгоритм для получения Конъюнктивной Нормальной Формы (КНФ)

**Цель:** Представить формулу в виде конъюнкции дизъюнктов.

На **Шаге 3** для КНФ нужно применять **дистрибутивность дизъюнкции относительно конъюнкции**:
`A ∨ (B ∧ C)` эквивалентно `(A ∨ B) ∧ (A ∨ C)`

**Общая тактика:** Раскрывать скобки, чтобы дизъюнкция оказалась "внутри", а конъюнкция — "снаружи".

**Шаг 4 (для КНФ): Упрощение (опционально, но рекомендуется)**
*   Удалить повторяющиеся литералы в дизъюнктах: `(A ∨ A ∨ B)` -> `(A ∨ B)`
*   Удалить дизъюнкты, которые заведомо истинны (содержат `A` и `¬A`).
*   Использовать законы поглощения.

---

## Пример преобразования

Возьмем формулу: `(A → B) ∧ (B → C)`

**Шаг 1: Устраняем импликации**
`(¬A ∨ B) ∧ (¬B ∨ C)`

**Получаем КНФ:**
Форма `(¬A ∨ B) ∧ (¬B ∨ C)` уже является **КНФ**! Это конъюнкция двух дизъюнктов. Дальнейшие действия не требуются.

**Получаем ДНФ:**
Нам нужно превратить эту конъюнкцию в дизъюнкцию.

**Шаг 3 (для ДНФ):** Применяем дистрибутивность `∧` относительно `∨`. Наша формула имеет вид `X ∧ Y`, где `X = (¬A ∨ B)`, а `Y = (¬B ∨ C)`.

`(¬A ∨ B) ∧ (¬B ∨ C)` раскрывается как:
`[¬A ∧ (¬B ∨ C)] ∨ [B ∧ (¬B ∨ C)]` (дистрибутивность)

Теперь раскроем скобки внутри каждой части:
1.  `¬A ∧ (¬B ∨ C)` = `(¬A ∧ ¬B) ∨ (¬A ∧ C)` (дистрибутивность)
2.  `B ∧ (¬B ∨ C)` = `(B ∧ ¬B) ∨ (B ∧ C)` (дистрибутивность)

Подставляем обратно:
`[(¬A ∧ ¬B) ∨ (¬A ∧ C)] ∨ [(B ∧ ¬B) ∨ (B ∧ C)]`

**Шаг 4 (для ДНФ): Упрощаем**
*   `(B ∧ ¬B)` — это всегда ложь. Его можно удалить, так как в дизъюнкции `Ложь ∨ X` эквивалентно `X`.
*   Убираем лишние скобки (ассоциативность ∨).

**Итоговая ДНФ:**
`(¬A ∧ ¬B) ∨ (¬A ∧ C) ∨ (B ∧ C)`

Это дизъюнкция трех конъюнктов.

---

## Важное дополнение: Совершенная форма (СДНФ и СКНФ)

Часто требуются не просто КНФ/ДНФ, а **совершенные** нормальные формы (**СДНФ** и **СКНФ**). Их отличие в том, что в каждой элементарной конъюнкции (для СДНФ) или дизъюнкции (для СКНФ) должны присутствовать **все переменные** из используемого набора.

**Как получить совершенную форму?**
1.  Постройте таблицу истинности для формулы.
2.  **Для СДНФ:**
    *   Выберите все строки, где формула принимает значение **Истина (1)**.
    *   Для каждой такой строки составьте конъюнкцию всех переменных: если значение переменной в строке равно 1, берите ее саму, если 0 — берите ее отрицание.
    *   Объедините все полученные конъюнкции знаком дизъюнкции (`∨`).
3.  **Для СКНФ:**
    *   Выберите все строки, где формула принимает значение **Ложь (0)**.
    *   Для каждой такой строки составьте дизъюнкцию всех переменных: если значение переменной в строке равно 0, берите ее саму, если 1 — берите ее отрицание.
    *   Объедините все полученные дизъюнкции знаком конъюнкции (`∧`).

Этот метод надежен и прост для понимания, хотя и может быть громоздким для формул с большим количеством переменных.

## Итог

| Действие | Для ДНФ | Для КНФ |
| :--- | :--- | :--- |
| **1. Устранить →, ↔** | `A → B` становится `¬A ∨ B` | `A → B` становится `¬A ∨ B` |
| **2. Продвинуть ¬** | Использовать де Моргана: ¬(A ∧ B) -> ¬A ∨ ¬B | Использовать де Моргана: ¬(A ∨ B) -> ¬A ∧ ¬B |
| **3. Дистрибутивность** | **∧ над ∨**: `A ∧ (B ∨ C)` -> `(A ∧ B) ∨ (A ∧ C)` | **∨ над ∧**: `A ∨ (B ∧ C)` -> `(A ∨ B) ∧ (A ∨ C)` |
| **4. Упрощение** | Удалить противоречивые конъюнкты | Удалить тождественно истинные дизъюнкты |



## Закон поглощения

### Суть закона поглощения

Закон поглощения гласит, что если у нас есть логическое выражение, состоящее из операции И (конъюнкции, `∧`) или ИЛИ (дизъюнкции, `∨`) над переменными, где одна часть выражения является подмножеством другой, то всё выражение может быть "поглощено" (упрощено до) этой большей части.

Закон имеет две основные формы:

#### 1. Закон поглощения для конъюнкции (И)

**Формула:**
`A ∧ (A ∨ B) ≡ A`

**Словесная формулировка:**
Логическое И между выражением `A` и результатом логического ИЛИ между `A` и любым другим выражением `B` эквивалентно просто `A`. Выражение `(A ∨ B)` "поглощается" выражением `A`.

**Пример:**
"Сегодня идет дождь И (Сегодня идет дождь ИЛИ завтра будет солнце)"
Упрощается до: "Сегодня идет дождь".

Если сегодня идет дождь (`A` истинно), то вся скобка `(A ∨ B)` автоматически истинна (по определению ИЛИ). Таким образом, итоговое выражение `A ∧ (истина)` зависит только от `A`.
Если же сегодня дождя нет (`A` ложно), то и всё выражение ложно, независимо от `B`.

#### 2. Закон поглощения для дизъюнкции (ИЛИ)

**Формула:**
`A ∨ (A ∧ B) ≡ A`

**Словесная формулировка:**
Логическое ИЛИ между выражением `A` и результатом логического И между `A` и любым другим выражением `B` эквивалентно просто `A`. Выражение `(A ∧ B)` "поглощается" выражением `A`.

**Пример:**
"Я куплю яблоки ИЛИ (Я куплю яблоки И апельсины)"
Упрощается до: "Я куплю яблоки".

Если я покупаю яблоки (`A` истинно), то всё исходное выражение истинно (по определению ИЛИ).
Если я не покупаю яблоки (`A` ложно), то и выражение `(A ∧ B)` ложно (так как `ложь ∧ B = ложь`). Таким образом, итогом будет `ложь ИЛИ ложь = ложь`, что again зависит только от `A`.

### Наглядная проверка с помощью таблиц истинности

Мы можем доказать эквивалентность, построив таблицы истинности для обеих частей уравнений.

**Проверка закона `A ∧ (A ∨ B) ≡ A`:**

| A | B | A ∨ B | A ∧ (A ∨ B) |
|---|---|-------|-------------|
| 0 | 0 |   0   |      0      |
| 0 | 1 |   1   |      0      |
| 1 | 0 |   1   |      1      |
| 1 | 1 |   1   |      1      |

Сравниваем последний столбец (`A ∧ (A ∨ B)`) и первый столбец (`A`). Они **идентичны**. Что и требовалось доказать.

**Проверка закона `A ∨ (A ∧ B) ≡ A`:**

| A | B | A ∧ B | A ∨ (A ∧ B) |
|---|---|-------|-------------|
| 0 | 0 |   0   |      0      |
| 0 | 1 |   0   |      0      |
| 1 | 0 |   0   |      1      |
| 1 | 1 |   1   |      1      |

Последний столбец (`A ∨ (A ∧ B)`) снова **идентичен** первому столбцу (`A`).

### Аналогия с теорией множеств

Закон поглощения также работает в теории множеств, что помогает лучше понять его суть.

*   **Для объединения (аналог ИЛИ):** `A ∪ (A ∩ B) = A`
    Объединение множества `A` с его частью (пересечением с `B`) даст просто множество `A`.
    ![](https://upload.wikimedia.org/wikipedia/commons/thumb/5/5a/A_absorbs_A_cap_B.svg/180px-A_absorbs_A_cap_B.svg.png)

*   **Для пересечения (аналог И):** `A ∩ (A ∪ B) = A`
    Пересечение множества `A` с бóльшим множеством (которое включает `A` и `B`) даст просто множество `A`.
    ![](https://upload.wikimedia.org/wikipedia/commons/thumb/5/53/A_absorbs_A_cup_B.svg/180px-A_absorbs_A_cup_B.svg.png)

### Зачем это нужно?

Главное применение закона поглощения — **упрощение логических выражений**. Сложные формулы, используемые в алгоритмах, цифровой схемотехнике, проектировании баз данных и написании условий в программировании, часто можно сделать намного короче и понятнее, применяя этот и другие законы логики (де Моргана, дистрибутивный и т.д.). Это повышает эффективность и снижает вероятность ошибок.

**Итог:** Закон поглощения — это мощный инструмент для преобразования и упрощения логических выражений, который показывает, что добавление избыточной информации (через `∧` или `∨`) не меняет исходного значения выражения.